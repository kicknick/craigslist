<html>
<head>
	<title></title>
</head>
<body>
	<input type="text" id="inputURL"/>
	<button id="go">GO</button>
	<br/>
	<a href="" target="_blank" id="resultLink"></a>
	<span id="result"></span>

<script type="text/javascript">

function sendURL(url, callback) {
	var xhr = new XMLHttpRequest();
	console.log(url)
	xhr.open('POST', '/?url='+url, false);
	xhr.send();

	if (xhr.status != 200) {
	  	console.log( xhr.status + ': ' + xhr.responseText ); 
	  	document.getElementById("result").innerHTML = "something works wrong, try again"

	} else {
		console.log(xhr.responseText)
		document.getElementById("resultLink").href="https://"+xhr.responseText
		document.getElementById("resultLink").innerHTML=xhr.responseText
		document.getElementById("result").innerHTML = ""
	}
}



document.addEventListener("DOMContentLoaded", ready);
function ready() {
	console.log("ready")
	document.getElementById('go').onclick=function(){
		const url = document.getElementById('inputURL').value
		sendURL(url, function() {})
	}

}
</script>
</body>
</html>